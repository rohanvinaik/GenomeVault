#!/usr/bin/env python3
"""Quick test to identify the exact import issue"""

import logging
import traceback

logger = logging.getLogger(__name__)


logger.info("üîç GenomeVault Import Diagnostic")
logger.info("=" * 50)

# Test 1: Basic package structure
logger.info("\n1. Testing basic package structure...")
try:
    logger.info("‚úì genomevault package exists")
except Exception:
    from genomevault.observability.logging import configure_logging

    logger = configure_logging()
    logger.exception("Unhandled exception")
    logger.info("‚úó genomevault package error: {e}")
    raise

# Test 2: Core config
logger.info("\n2. Testing core.config...")
try:
    logger.info("‚úì core.config imports work")
except Exception:
    from genomevault.observability.logging import configure_logging

    logger = configure_logging()
    logger.exception("Unhandled exception")
    logger.info("‚úó core.config error: {e}")
    raise

# Test 3: Utils
logger.info("\n3. Testing utils...")
try:
    logger.info("‚úì utils.logging works")
except Exception:
    from genomevault.observability.logging import configure_logging

    logger = configure_logging()
    logger.exception("Unhandled exception")
    logger.info("‚úó utils.logging error: {e}")
    raise

try:
    logger.info("‚úì utils.encryption works")
except Exception:
    from genomevault.observability.logging import configure_logging

    logger = configure_logging()
    logger.exception("Unhandled exception")
    logger.info("‚úó utils.encryption error: {e}")
    raise

# Test 4: Hypervector - step by step
logger.info("\n4. Testing hypervector_transform step by step...")

# 4a: Can we import the package?
try:
    logger.info("‚úì hypervector_transform package imports")
except Exception:
    from genomevault.observability.logging import configure_logging

    logger = configure_logging()
    logger.exception("Unhandled exception")
    logger.info("‚úó hypervector_transform package error: {e}")
    traceback.print_exc()
    raise

# 4b: Can we import from binding directly?
try:
    logger.info("‚úì circular_bind imports from binding.py")
except Exception:
    from genomevault.observability.logging import configure_logging

    logger = configure_logging()
    logger.exception("Unhandled exception")
    logger.info("‚úó binding.py error: {e}")
    raise

# 4c: What about the __init__.py imports?
try:
    logger.info("‚úì circular_bind imports from __init__.py")
except Exception:
    from genomevault.observability.logging import configure_logging

    logger = configure_logging()
    logger.exception("Unhandled exception")
    logger.info("‚úó __init__.py re-export error: {e}")
    raise

# 4d: Check encoding
try:
    logger.info("‚úì HypervectorEncoder imports correctly")
except Exception:
    from genomevault.observability.logging import configure_logging

    logger = configure_logging()
    logger.exception("Unhandled exception")
    logger.info("‚úó encoding.py error: {e}")
    traceback.print_exc()
    raise

# Test 5: The specific import that was failing
logger.info("\n5. Testing the specific failing import...")
try:
    logger.info("‚úì HypervectorEncoder imports from package")
except Exception:
    from genomevault.observability.logging import configure_logging

    logger = configure_logging()
    logger.exception("Unhandled exception")
    logger.info("‚úó Package-level import error: {e}")
    raise

logger.info("\n" + "=" * 50)
logger.info("Diagnostic complete!")


