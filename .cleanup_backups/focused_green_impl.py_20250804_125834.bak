#!/usr/bin/env python3
"""
Focused Green Toolchain Implementation
"""
import os
import subprocess
from pathlib import Path


def main():
    project_root = Path("/Users/rohanvinaik/genomevault")
    os.chdir(project_root)

    print("Starting focused Green Toolchain implementation...")

    # First, install updated dependencies
    print("\n=== Installing updated dependencies ===")
    subprocess.run(["pip", "install", "-e", ".[dev]"], check=False)

    # Run quick validation
    print("\n=== Running validation ===")

    print("1. Checking ruff...")
    result = subprocess.run(["ruff", "check", "."], capture_output=True, text=True)
    if result.returncode == 0:
        print("✓ Ruff check passed")
    else:
        print(f"⚠ Ruff found issues:\n{result.stdout}{result.stderr}")

    print("\n2. Checking mypy on core packages...")
    result = subprocess.run(
        ["mypy", "genomevault/hypervector", "genomevault/core"],
        capture_output=True,
        text=True,
    )
    if result.returncode == 0:
        print("✓ MyPy check passed")
    else:
        print(f"⚠ MyPy found issues:\n{result.stdout}{result.stderr}")

    print("\n3. Running pytest...")
    result = subprocess.run(
        ["pytest", "-q", "--tb=short"], capture_output=True, text=True
    )
    print(f"Pytest result: {result.returncode}")
    if result.stdout:
        print(f"Output:\n{result.stdout}")
    if result.stderr:
        print(f"Errors:\n{result.stderr}")

    print("\n=== Green Toolchain basic implementation completed ===")


if __name__ == "__main__":
    main()




