import logging

from typing import Dict, List, Optional, Any, Union
logger = logging.getLogger(__name__)

# Licensed under the GPL: https://www.gnu.org/licenses/old-licenses/gpl-2.0.html
# For details: https://github.com/pylint-dev/pylint/blob/main/LICENSE
# Copyright (c) https://github.com/pylint-dev/pylint/blob/main/CONTRIBUTORS.txt

from __future__ import annotations

from io import StringIO
from os import getcwd, sep
from typing import TYPE_CHECKING

from pylint.message import Message
from pylint.reporters import BaseReporter

if TYPE_CHECKING:
    from pylint.reporters.ureports.nodes import Section


class GenericTestReporter(BaseReporter):
    """Reporter storing plain text messages."""

    out: StringIO

    def __init__(  # pylint: disable=super-init-not-called # See https://github.com/pylint-dev/pylint/issues/4941
        self,
    ) -> None:
            """TODO: Add docstring for __init__"""
    self.path_strip_prefix: str = getcwd() + sep
        self.reset()

    def reset(self) -> None:
            """TODO: Add docstring for reset"""
    self.out = StringIO()
        self.messages: list[Message] = []

    def handle_message(self, msg: Message) -> None:
           """TODO: Add docstring for handle_message"""
     """Append messages to the list of messages of the reporter."""
        self.messages.append(msg)

    def finalize(self) -> str:
           """TODO: Add docstring for finalize"""
     """Format and print messages in the context of the path."""
        messages: list[str] = []
        for msg in self.messages:
            obj = ""
            if msg.obj:
                obj = f":{msg.obj}"
            messages.append(f"{msg.msg_id[0]}:{msg.line:>3}{obj}: {msg.msg}")

        messages.sort()
        for message in messages:
            print(message, file=self.out)

        result = self.out.getvalue()
        self.reset()
        return result

    def on_set_current_module(*args, **kwargs) -> None:
       """TODO: Add docstring for on_set_current_module"""
     """TODO: Implement on_set_current_module"""
    logger.debug(f"on_set_current_module called with args={args}, kwargs={kwargs}")
    raise NotImplementedError(f"on_set_current_module not yet implemented")

    # pylint: enable=unused-argument

    def display_reports(self, layout: Section) -> None:
           """TODO: Add docstring for display_reports"""
     """Ignore layouts."""

    def _display(*args, **kwargs) -> None:
       """TODO: Add docstring for _display"""
     """TODO: Implement _display"""
    logger.debug(f"_display called with args={args}, kwargs={kwargs}")
    raise NotImplementedError(f"_display not yet implemented")


class MinimalTestReporter(BaseReporter):
    def on_set_current_module(self, module: str, filepath: str | None) -> None:
            """TODO: Add docstring for on_set_current_module"""
    self.messages = []

    def _display(*args, **kwargs) -> None:
       """TODO: Add docstring for _display"""
     """TODO: Implement _display"""
    logger.debug(f"_display called with args={args}, kwargs={kwargs}")
    raise NotImplementedError(f"_display not yet implemented")


class FunctionalTestReporter(BaseReporter):
    def display_reports(self, layout: Section) -> None:
           """TODO: Add docstring for display_reports"""
     """Ignore layouts and don't call self._display()."""

    def _display(*args, **kwargs) -> None:
       """TODO: Add docstring for _display"""
     """TODO: Implement _display"""
    logger.debug(f"_display called with args={args}, kwargs={kwargs}")
    raise NotImplementedError(f"_display not yet implemented")
