import re
from pathlib import Path


def test_no_bare_excepts():
    root = Path(__file__).resolve().parents[2]
    offenders = []
    for p in root.rglob("*.py"):
        txt = p.read_text(encoding="utf-8", errors="ignore")
        if re.search(r"except\s*:\s*\n", txt):
            offenders.append(str(p))
    assert not offenders, f"Bare except found in: {offenders}"


