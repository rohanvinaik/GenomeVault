import numpy as np

from genomevault.pir.client import PIRClient


def test_query_decode_roundtrip_minimal():
    tbl = np.arange(32).reshape(8, 4).tolist()
    cli = PIRClient()
    q = cli.build_query(index=5, table_shape=(8, 4))
    # Fake server: apply selection naively (for test only)
    resp = {"shares": [[0] * 4, tbl[5]]}
    out = cli.decode_response(resp)
    assert out == tbl[5]

